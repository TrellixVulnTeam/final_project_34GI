<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    {% load static %}
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <script src="{% static 'js/jquery-3.4.1.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js'%}"></script>
    <title>check records</title>
</head>
<body>
    <button class="btn-default"><a href="{% url 'index' %}">back to main page</a></button>

    <table class="text-center">
        {% for record in records %}
            <tr>
            <td>{{ record }}</td>
            </tr>
        {% endfor %}
    </table>

    <!-- 实现页面切换功能，每一页显示十条历史记录 -->
    <!-- 使用了bootstrap渲染界面 -->
    <div class="pagination">
        <span class="step-links">
            {% if records.has_previous %}
                <button>
                <a class="active" href="{% url 'checkRecords' records.previous_page_number %}">上一页</a>
                </button>
            {% endif %}

            <span class="current">
                Page {{ records.number }} of {{ records.paginator.num_pages }}
            </span>

            {% if records.has_next %}
                <button>
                <a class="active" href="{% url 'checkRecords' records.next_page_number %}">下一页</a>
                </button>
            {% endif %}
        </span>
    </div>

    <!--
<script>
    let page = 1;
    document.getElementById('page').textContent = page;

    function fetch() {
        let xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                document.getElementById('main_table').innerHTML = xmlHttp.responseText;
                // getInfo(this);
            }
        };
        xmlHttp.open("GET", `check_records/${page}`, true);
        xmlHttp.send();
    }
    
    function getInfo(xml) {
        const xmlDoc = xml.responseXML;
        let table="<tr><th>Artist</th><th>Title</th></tr>";
        const x = xmlDoc.getElementsByTagName("CD");
        for (let i = 0; i < x.length; i++) {
            table += "<tr><td>" +
            x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
            "</td><td>" +
            x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
            "</td></tr>";
        }
        document.getElementById("demo").innerHTML = table;
    }
</script>
    -->

</body>
</html>